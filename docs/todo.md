

#### 完整的TODO列表
TODO列表按手册章节分组，总计约30项。每个项有：
- **ID**：唯一编号，便于跟踪。
- **描述**：具体任务。
- **依赖**：前置项。
- **预计时间**：粗估（以天为单位，假设用AI工具如Cursor+GLM-4.7）。
- **完成标准**：如何验证。
- **进度**：初始为“未开始”。您可以手动更新，或让Claude在输出末尾报告。

**总体进度跟踪**：用简单表格维护（e.g., Google Sheets或Markdown）。每次开发后，Claude输出更新表格，如“项1: 已完成（日期）”。如果跑偏，重读head.md重启。

##### Phase 1: 准备与环境（对应P0-P1）
1. **ID: 1.1** - 阅读并确认手册愿景与原则。  
   描述：Claude确认理解项目概述、原则、栈。输出总结。  
   依赖：无。  
   预计时间：0.5天。  
   完成标准：输出无偏差总结。  
   进度：未开始。

2. **ID: 1.2** - 设置开发环境（Rust、Postgres、Python）。  
   描述：生成安装脚本/步骤，测试运行。  
   依赖：1.1。  
   预计时间：1天。  
   完成标准：终端命令成功，输出“环境就绪”。  
   进度：未开始。

3. **ID: 1.3** - 初始化项目文件夹与Git。  
   描述：创建结构、gitignore、初始commit。  
   依赖：1.2。  
   预计时间：0.5天。  
   完成标准：GitHub仓库上线。  
   进度：未开始。

##### Phase 2: 核心记忆层（对应P2）
4. **ID: 2.1** - 设计Postgres Schema（raw_memories/events）。  
   描述：生成迁移SQL，应用Diesel。  
   依赖：1.3。  
   预计时间：1天。  
   完成标准：数据库表创建，查询无错。  
   进度：未开始。

5. **ID: 2.2** - 实现事件提取（SLM Prompt + Rust函数）。  
   描述：写extract_event，集成Ollama。  
   依赖：2.1。  
   预计时间：1.5天。  
   完成标准：输入文本，输出正确JSON。  
   进度：未开始。

6. **ID: 2.3** - 实现存储流程（加密+插入）。  
   描述：写process_input异步函数。  
   依赖：2.2。  
   预计时间：1天。  
   完成标准：数据存入，加密验证。  
   进度：未开始。

7. **ID: 2.4** - 添加Mem0向量检索集成。  
   描述：Rust绑定Mem0，存事件向量。  
   依赖：2.3。  
   预计时间：1天。  
   完成标准：搜索返回相关事件。  
   进度：未开始。

8. **ID: 2.5** - 测试核心记忆层。  
   描述：写单元/集成测试。  
   依赖：2.4。  
   预计时间：1天。  
   完成标准：cargo test通过。  
   进度：未开始。

##### Phase 3: 认知层（对应P3）
9. **ID: 3.1** - 扩展Schema（views/stable_schema）。  
   描述：加表+索引。  
   依赖：2.5。  
   预计时间：0.5天。  
   完成标准：表创建。  
   进度：未开始。

10. **ID: 3.2** - 实现视图生成（SLM + Mem0）。  
    描述：写generate_view。  
    依赖：3.1。  
    预计时间：1.5天。  
    完成标准：从事件生成视图。  
    进度：未开始。

11. **ID: 3.3** - 实现晋升闸门（纯规则）。  
    描述：写promotion_gate。  
    依赖：3.2。  
    预计时间：1天。  
    完成标准：模拟时间，查固化。  
    进度：未开始。

12. **ID: 3.4** - 测试认知层。  
    描述：端到端测试视图/闸门。  
    依赖：3.3。  
    预计时间：1天。  
    完成标准：测试覆盖。  
    进度：未开始。

##### Phase 4: 存储分层与隐私（对应P4）
13. **ID: 4.1** - 实现分层逻辑（热/温/冷）。  
    描述：写archive_old + zlib。  
    依赖：3.4。  
    预计时间：1.5天。  
    完成标准：老数据压缩/摘要存。  
    进度：未开始。

14. **ID: 4.2** - 增强隐私（审计日志+导出）。  
    描述：加表/函数。  
    依赖：4.1。  
    预计时间：1天。  
    完成标准：日志记录，导出JSON。  
    进度：未开始。

15. **ID: 4.3** - 测试分层与隐私。  
    描述：模拟归档/访问。  
    依赖：4.2。  
    预计时间：1天。  
    完成标准：无泄露，压缩有效。  
    进度：未开始。

##### Phase 5: Agent层（对应P5）
16. **ID: 5.1** - 定义Agent模型表。  
    描述：加agents表。  
    依赖：4.3。  
    预计时间：0.5天。  
    完成标准：预置两个Agent。  
    进度：未开始。

17. **ID: 5.2** - 实现Agent运行（actix Actor）。  
    描述：写AnalysisAgent。  
    依赖：5.1。  
    预计时间：1.5天。  
    完成标准：查询返回分析。  
    进度：未开始。

18. **ID: 5.3** - 集成Python界面桥接。  
    描述：app.py调用Rust。  
    依赖：5.2。  
    预计时间：1天。  
    完成标准：Streamlit跑分析。  
    进度：未开始。

19. **ID: 5.4** - 测试Agent层。  
    描述：端到端测试。  
    依赖：5.3。  
    预计时间：1天。  
    完成标准：分析闭环存记忆。  
    进度：未开始。

##### Phase 6: 插件系统（对应P6）
20. **ID: 6.1** - 定义插件表。  
    描述：加plugins表。  
    依赖：5.4。  
    预计时间：0.5天。  
    完成标准：表创建。  
    进度：未开始。

21. **ID: 6.2** - 实现插件管理器（Wasm沙箱）。  
    描述：写PluginManager。  
    依赖：6.1。  
    预计时间：2天。  
    完成标准：加载/跑Wasm。  
    进度：未开始。

22. **ID: 6.3** - 实现SaaS商店（Node.js）。  
    描述：写server.js + Stripe。  
    依赖：6.2。  
    预计时间：1.5天。  
    完成标准：订阅生成密钥。  
    进度：未开始。

23. **ID: 6.4** - 集成插件到界面。  
    描述：Streamlit选插件。  
    依赖：6.3。  
    预计时间：1天。  
    完成标准：跑插件无错。  
    进度：未开始。

24. **ID: 6.5** - 测试插件系统。  
    描述：权限/沙箱测试。  
    依赖：6.4。  
    预计时间：1天。  
    完成标准：安全运行。  
    进度：未开始。

##### Phase 7: 部署与测试（对应P7）
25. **ID: 7.1** - 写Dockerfile/compose。  
    描述：容器化app/db。  
    依赖：6.5。  
    预计时间：1天。  
    完成标准：docker up成功。  
    进度：未开始。

26. **ID: 7.2** - 实现测试框架（cargo/pytest）。  
    描述：覆盖所有层。  
    依赖：7.1。  
    预计时间：2天。  
    完成标准：80%覆盖。  
    进度：未开始。

27. **ID: 7.3** - 添加监控/日志。  
    描述：Prometheus/Slog。  
    依赖：7.2。  
    预计时间：1天。  
    完成标准：指标输出。  
    进度：未开始。

##### Phase 8: 扩展与维护（对应P8）
28. **ID: 8.1** - 规划V2扩展（多模态/商店）。  
    描述：写接口预留文档。  
    依赖：7.3。  
    预计时间：1天。  
    完成标准：文档完整。  
    进度：未开始。

29. **ID: 8.2** - 规划V3高级（好奇心/预测）。  
    描述：写伪码/路线。  
    依赖：8.1。  
    预计时间：1天。  
    完成标准：扩展计划。  
    进度：未开始。

30. **ID: 8.3** - 写维护指南（更新/备份）。  
    描述：cron/版本控制。  
    依赖：8.2。  
    预计时间：0.5天。  
    完成标准：指南文件。  
    进度：未开始。

#### 进度跟踪表格（初始）
用这个Markdown表格维护，每次Claude输出末尾更新：

| Phase | ID | 描述 | 进度 | 完成日期 | 备注 |
|-------|----|------|------|----------|------|
| 1 | 1.1 | 阅读确认 | 已完成 | 2026-02-02 | 项目愿景和原则已确认 |
| 1 | 1.2 | 环境设置 | 已完成 | 2026-02-02 | 安装脚本已创建 |
| 1 | 1.3 | 项目初始化 | 已完成 | 2026-02-02 | Git仓库已初始化，README、LICENSE、.gitignore已创建 |
| 2 | 2.1 | 设计Schema | 进行中 | - | - |
| 2 | 2.2 | 事件提取 | 未开始 | - | - |
| ... | ... | ... | ... | - | ... |
| 8 | 8.3 | 维护指南 | 未开始 | - | - |

**总体完成度**：10% (3/30)。预计总时间：25-30天（分批）。

现在，您可以复制这个TODO到Claude，第一句让它读head.md，然后说“基于TODO，执行项1.1，并更新进度表格。” 如果需要调整TODO，说一声！